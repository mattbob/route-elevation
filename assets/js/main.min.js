'use strict';function _toConsumableArray(b){if(Array.isArray(b)){for(var c=0,d=Array(b.length);c<b.length;c++)d[c]=b[c];return d}return Array.from(b)}var directionsService,directionsDisplay,data,map,chart,marker,polyline,chartOptions={legend:'none',animation:{startup:!0,duration:1e3,easing:'in'},backgroundColor:{fill:'transparent'},fontName:'Roboto',lineWidth:5,tooltip:{textStyle:{fontName:'Roboto'}},trendLines:{0:{type:'linear',color:'silver'}},chartArea:{top:0,right:0,bottom:0,left:0},colors:['#4285F4'],vAxis:{baselineColor:'transparent',textPosition:'in'}};google.load('visualization','1',{packages:['corechart']});function initMap(){directionsService=new google.maps.DirectionsService,directionsDisplay=new google.maps.DirectionsRenderer({draggable:!0}),directionsDisplay.addListener('directions_changed',function(){polyline&&polyline.setMap(null);var h=directionsDisplay.getDirections(),j=new google.maps.ElevationService;displayPathElevation(h.routes[0].overview_path,j,h.routes[0].overview_path.length),displayRouteDetails(h.routes[0].legs[0])}),map=new google.maps.Map(document.getElementById('map'),{zoom:6,center:{lat:36.0924094,lng:-112.843134},fullscreenControl:!1,mapTypeControl:!0,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:['roadmap','satellite','hybrid','terrain']}}),directionsDisplay.setMap(map);var b={},c=document.getElementById('start'),d=document.getElementById('end'),f=new google.maps.places.Autocomplete(c,b);f.setFields(['address_components','formatted_address','id','type','geometry','name']);var g=new google.maps.places.Autocomplete(d,b);g.setFields(['address_components','formatted_address','id','type','geometry','name']),document.getElementById('submit').addEventListener('click',function(h){h.preventDefault();var j=f.getPlace(),k=g.getPlace();return j.geometry?k.geometry?void calculateAndDisplayRoute(directionsService,directionsDisplay):void window.alert('No details available for the destination address you entered.'):void window.alert('No details available for the starting address you entered.')})}function calculateAndDisplayRoute(b,c){b.route({origin:document.getElementById('start').value,destination:document.getElementById('end').value,travelMode:'DRIVING',optimizeWaypoints:!0},function(d,f){'OK'===f?c.setDirections(d):window.alert('Directions request failed due to '+f)})}function insertAfter(b,c){c.parentNode.insertBefore(b,c.nextSibling)}function displayRouteDetails(b){document.getElementById('route-details-distance').className='route-details__detail visible',document.getElementById('route-details-duration').className='route-details__detail visible',document.getElementById('route-details-distance').innerHTML='<div class="route-details__detail__name">Distance</div><div class="route-details__detail__value">'+b.distance.text+'</div>';document.getElementById('route-details-duration').innerHTML='<div class="route-details__detail__name">Duration</div><div class="route-details__detail__value">'+b.duration.text+'</div>'}function displayPathElevation(b,c,d){polyline=new google.maps.Polyline({path:b,strokeColor:'#0000CC',strokeOpacity:0.4,map:map}),500<d&&(d=500),c.getElevationAlongPath({path:b,samples:d},plotElevation)}function plotElevation(b,c){var d=b.map(function(o){return o.elevation}),f=Math.max.apply(Math,_toConsumableArray(d)),g=d.indexOf(f),h=Math.min.apply(Math,_toConsumableArray(d)),j=d.indexOf(h),k=document.getElementById('elevation_chart');if(k.style.visibility='visible','OK'!==c)return void(k.innerHTML='Cannot show elevation: request failed because '+c);chart=new google.visualization.LineChart(k),data=new google.visualization.DataTable,data.addColumn('string','Sample'),data.addColumn('number','Elevation (ft)'),data.addColumn({type:'string',role:'style'}),data.locations=[],data.elevations=[];for(var m,l=0;l<b.length;l++)m=Math.round(3.28084*b[l].elevation),l===g?data.addRow(['',m,'point { size: 3; visible: true; shape-type: circle; fill-color: red; }']):l===j?data.addRow(['',m,'point { size: 3; visible: true; shape-type: circle; fill-color: green; }']):data.addRow(['',m,null]),data.locations.push(b[l].location),data.elevations.push(Math.round(3.28084*b[l].elevation));document.getElementsByClassName('route-elevation')[0].className='route-elevation visible',chart.draw(data,chartOptions);var n=document.createElement('a');n.setAttribute('id','chart_expand'),n.setAttribute('href','#'),n.innerHTML='<i class="material-icons" aria-hidden="true">fullscreen</i> <span>Expand</span>',k.appendChild(n),google.visualization.events.addListener(chart,'onmouseover',elevationHover),google.visualization.events.addListener(chart,'onmouseout',clearMarker),n.addEventListener('click',function(o){o.preventDefault();var p=document.getElementsByClassName('route-elevation')[0];p.className='route-elevation visible route-elevation--expanded',resizeChart()})}function commaSeparateNumber(b){for(;/(\d+)(\d{3})/.test(b.toString());)b=b.toString().replace(/(\d+)(\d{3})/,'$1,$2');return b}function elevationHover(b){var c=data.locations[b.row],d=data.elevations[b.row],f='<div class="info-window">Elevation (ft)<br><strong>'+commaSeparateNumber(Math.round(d))+'</strong></div>';marker=new google.maps.Marker({position:c,map:map}),addinfoWindow(f)}function clearMarker(){marker.setMap(null)}function addinfoWindow(b){var c=new google.maps.InfoWindow({content:b});c.open(map,marker)}function resizeChart(){if(chart){var b=!1;'route-elevation visible route-elevation--expanded'===document.getElementsByClassName('route-elevation')[0].className&&(b=!0),chart=new google.visualization.LineChart(document.getElementById('elevation_chart')),chartOptions.animation=null,b&&(document.getElementsByClassName('route-elevation')[0].className='route-elevation visible route-elevation--expanded'),chart.draw(data,chartOptions);var c=document.createElement('a');c.setAttribute('id','chart_expand'),c.setAttribute('href','#'),c.innerHTML='<i class="material-icons" aria-hidden="true">fullscreen</i> <span>Expand</span>',b&&(c.innerHTML='<i class="material-icons" aria-hidden="true">fullscreen_exit</i> <span>Shrink</span>'),document.getElementById('elevation_chart').appendChild(c),google.visualization.events.addListener(chart,'onmouseover',elevationHover),google.visualization.events.addListener(chart,'onmouseout',clearMarker),c.addEventListener('click',function(d){d.preventDefault();var f=document.getElementsByClassName('route-elevation')[0];f.className='route-elevation visible route-elevation--expanded',b&&(f.className='route-elevation visible'),resizeChart()})}}window.onresize=resizeChart,document.getElementById('address-swap').addEventListener('click',function(){var c=document.getElementById('start').value,d=document.getElementById('end').value;document.getElementById('start').value=d,document.getElementById('end').value=c,calculateAndDisplayRoute(directionsService,directionsDisplay)}),document.getElementById('route-add').addEventListener('click',function(b){b.preventDefault();var c=document.getElementById('start').value,d=document.getElementById('end').value;(''===c||''===d)&&window.alert('First, add a starting address and a destination before adding more stops along the way.');var f=document.getElementsByClassName('text-field--waypoints'),g='<div class="text-field text-field--waypoint"><i class="material-icons text-field__icon" tabindex="0" role="button">place</i><input tabindex="'+(f.length+1)+'" type="text" class="waypoint" class="text-field__input" placeholder="Add a stop on your trip" aria-label="Add a stop on your trip" required minlength="3"></div>'});